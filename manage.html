<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إدارة الطلاب</title>
<link href='https://fonts.googleapis.com/css2?family=Calibri:wght@400;700&display=swap' rel='stylesheet'>
<style>
body{font-family:Calibri;background:#fafafa;padding:20px;margin:0}
h2{text-align:center;color:#1976d2}
table{width:100%;border-collapse:collapse;margin-top:20px}
td,th{border:1px solid #000;padding:10px;text-align:center}
th{background:#1976d2;color:white}
button.small{padding:5px 10px;font-size:14px;border:none;border-radius:5px;background:#1976d2;color:white;cursor:pointer}
button.delete{background:#d32f2f !important}
.main-btn{padding:10px 15px;font-size:16px;border:none;border-radius:8px;background:#1976d2;color:white;cursor:pointer;margin-top:15px}
</style>
</head>
<body>

<h2>إدارة الطلاب</h2>

<table id="tbl">
<tr>
<th>الكود</th>
<th>الاسم</th>
<th>الصف</th>
<th>المعلم</th>
<th>خيارات</th>
</tr>
</table>

<button class="main-btn" onclick="location='admin.html'">إضافة طالب</button>
<button class="main-btn" onclick="location='index.html'">الصفحة الرئيسية</button>

<script>
function load(){
 let all = localStorage.getItem("students");
 all = all ? JSON.parse(all) : {};

 let tbl = document.getElementById("tbl");

 Object.keys(all).forEach(code=>{
   let tr=document.createElement("tr");
   tr.innerHTML=`
     <td>${code}</td>
     <td>${all[code].name || ""}</td>
     <td>${all[code].grade || ""}</td>
     <td>${all[code].teacher || ""}</td>
     <td>
        <button class="small" onclick="edit('${code}')">تعديل</button>
        <button class="small delete" onclick="delStd('${code}')">حذف</button>
     </td>
   `;
   tbl.appendChild(tr);
 });
}

function edit(code){
 localStorage.setItem("editStudent", code);
 location="admin.html";
}

function delStd(code){
    if(!confirm("هل تريد حذف هذا الطالب؟")) return;

    let all = localStorage.getItem("students");
    all = all ? JSON.parse(all) : {};

    delete all[code];

    localStorage.setItem("students", JSON.stringify(all));

    alert("تم حذف الطالب بنجاح");
    location.reload();
}

load();
</script>

</body>
</html>
