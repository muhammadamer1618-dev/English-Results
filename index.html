<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>دخول المشرف - مدارس الفلاح الأهلية</title>
<link href="https://fonts.googleapis.com/css2?family=Calibri:wght@400;700&display=swap" rel="stylesheet">
<style>
body{
  font-family: Calibri;
  background: linear-gradient(135deg,#1976d2,#42a5f5);
  height:100vh;margin:0;
  display:flex;align-items:center;justify-content:center;
}
.card{
  background:#fff;color:#1565c0;
  padding:30px;border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.3);
  width:90%;max-width:400px;text-align:center;
}
h1{margin:0;font-size:28px;font-weight:bold;}
h2{margin-top:5px;font-size:20px;color:#d32f2f;}
input,button{
  width:100%;padding:12px;margin-top:15px;
  border-radius:8px;border:1px solid #999;
  font-size:18px;
}
button{
  background:#1976d2;color:#fff;border:none;
  cursor:pointer;font-weight:bold;
}
button:hover{opacity:0.9;}
.link-btn{
  background:#d32f2f;
}
</style>
</head>
<body>

<div class="card">
  <h1>مدارس الفلاح الأهلية</h1>
  <h2>قسم اللغة الإنجليزية</h2>

  <input id="pwd" type="password" placeholder="ادخل الرقم السري للمشرف">
  <button onclick="login()">دخول المشرف</button>

  <button class="link-btn" onclick="location='student.html'">صفحة الطالب</button>
</div>

<script>
// إعداد Firebase
var firebaseConfig = {
  apiKey: "AIzaSyCX-KNQTu0Y1tnTGWd1sKtXLDUmR7Tehek",
  authDomain: "english-results.firebaseapp.com",
  projectId: "english-results",
  storageBucket: "english-results.firebasestorage.app",
  messagingSenderId: "673616902884",
  appId: "1:673616902884:web:62c38d39a3c1a0694a4af1"
};
firebase.initializeApp(firebaseConfig);
var db = firebase.firestore();

async function login(){
  var p = document.getElementById('pwd').value.trim();

  // البحث عن كلمة مرور المشرف في Firebase
  try {
    var adminRef = db.collection("admins").doc("supervisor"); // تأكد من أن هذا هو المسار الصحيح
    var doc = await adminRef.get();

    if (!doc.exists) {
      alert("لا يوجد مشرف مسجل");
      return;
    }

    var storedPwd = doc.data().password; // احفظ كلمة المرور في Firebase كـ "password"

    if (p === storedPwd) {
      location = "admin.html";
    } else {
      alert("الرقم السري غير صحيح");
    }

  } catch (e) {
    alert("حدث خطأ في الاتصال بقاعدة البيانات");
    console.log(e);
  }
}
</script>

</body>
</html>
